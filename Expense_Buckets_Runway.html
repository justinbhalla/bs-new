<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>bataSutra — Expense Buckets & Runway</title>
  <meta name="description" content="Categorize expenses, set buffers, and project months of runway. Fully client-side." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{ --brand:#8B0000; --brand-ink:#7a0000; --ink:#111; --muted:#6b7280; --bg:#fff; --card:#fff; --ring:rgba(139,0,0,.25);}
    html,body{height:100%}
    body{font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji"; background:var(--bg); color:var(--ink)}
    .container{max-width:80rem; margin:0 auto; padding-left:1rem; padding-right:1rem;}
    .card{background:var(--card); border:1px solid #e5e7eb; border-radius:1rem; box-shadow:0 1px 2px rgba(0,0,0,.04);}
    .lift{transition:transform .15s ease, box-shadow .15s ease}
    .lift:hover{transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.08)}
    .kicker{letter-spacing:.08em; font-weight:700; font-size:.75rem; text-transform:uppercase; color:var(--brand-ink)}
    .btn{display:inline-flex; align-items:center; gap:.5rem; padding:.625rem .9rem; border-radius:.65rem; font-weight:600; font-size:.92rem}
    .btn-ghost{border:1px solid #e5e7eb; color:#374151}
    .btn-ghost:hover{border-color:var(--brand); color:var(--brand-ink)}
    .btn-primary{background:var(--brand); color:#fff}
    .btn-primary:hover{opacity:.9}
    .field label{font-size:.84rem; color:#334155; font-weight:600}
    .field input, .field select{width:100%; padding:.65rem .75rem; border:1px solid #e5e7eb; border-radius:.65rem; font-size:.95rem}
    .field input:focus, .field select:focus{outline:none; box-shadow:0 0 0 .25rem var(--ring); border-color:var(--brand)}
    .muted{color:#64748b}
    .mono{font-variant-numeric:tabular-nums}
    .pill{font-weight:600; font-size:.72rem; padding:.25rem .5rem; border-radius:.5rem; background:#f1f5f9; color:#0f172a}
    table.t {width:100%} table.t th, table.t td {padding:.5rem .75rem; border-bottom:1px solid #e5e7eb; font-size:.9rem}
    table.t th {color:#334155; font-weight:700}
    .ok{color:#16a34a} .warn{color:#b45309} .bad{color:#dc2626}
    /* Footer (Anthropic-inspired, white) */
    .footer { background:#fff; color:#0f172a; }
    .footer a { color:#334155; }
    .footer a:hover { color: var(--brand-ink); }
    .footer .heading { font-size:.85rem; font-weight:700; letter-spacing:.04em; text-transform:uppercase; color:#64748b; }
    .footer .muted { color:#64748b; }
    .footer .divider { border-top:1px solid #e5e7eb; }
    .footer .chip { font-size:.72rem; border:1px solid #e5e7eb; border-radius:999px; padding:.25rem .5rem; color:#334155; }
    .grid-cards{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:.75rem}
    @media (max-width:640px){ .grid-cards{grid-template-columns:1fr} }
    .small{font-size:.8rem}
  </style>
</head>
<body class="min-h-full">
  <!-- Header -->
  <header class="sticky top-0 z-40 border-b bg-white/90 backdrop-blur supports-[backdrop-filter]:bg-white/70">
    <div class="container flex items-center justify-between py-3">
      <a href="/" class="flex items-center gap-3">
        <span class="grid place-items-center h-9 w-9 rounded-xl bg-[var(--brand)] text-white font-bold shadow-sm">bS</span>
        <div>
          <div class="text-lg font-bold leading-tight">bataSutra</div>
          <div class="text-xs text-[var(--muted)] -mt-0.5">News, context & tools</div>
        </div>
      </a>
      <nav class="hidden sm:flex items-center gap-5 text-sm text-slate-600">
        <a class="hover:text-[var(--brand-ink)]" href="/#indices">Markets</a>
        <a class="hover:text-[var(--brand-ink)]" href="/#heatmap">Heatmap</a>
        <a class="hover:text-[var(--brand-ink)]" href="/#commodities">Commodities</a>
        <a class="hover:text-[var(--brand-ink)]" href="/tools" aria-current="page">Tools</a>
        <a class="hover:text-[var(--brand-ink)]" href="/#articles">Articles</a>
      </nav>
      <div class="hidden sm:flex items-center gap-2">
        <a href="/#subscribe" class="btn btn-primary">Subscribe</a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="border-b bg-white">
    <div class="container py-8 md:py-12">
      <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-6">
        <div class="max-w-2xl">
          <div class="kicker mb-2">Personal Finance</div>
          <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">Expense Buckets & Runway</h1>
          <p class="mt-3 text-slate-600 text-lg">Categorize expenses, set buffers, and project months of runway.</p>
          <div class="mt-3 flex flex-wrap gap-2">
            <span class="pill">Budget</span><span class="pill">Runway</span>
          </div>
        </div>
        <div class="flex items-center gap-3 shrink-0">
          <button id="copyLink" class="btn btn-ghost" title="Copy link with inputs">Copy Link</button>
          <a href="/tools" class="btn btn-ghost">Browse Tools</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Body -->
  <main class="container py-8">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- LEFT: Inputs -->
      <section class="card p-6 md:p-8 lift">
        <h2 class="text-xl font-bold tracking-tight">Inputs</h2>
        <p class="muted mt-1">Add monthly expenses, mark essentials, and set buffer months per bucket. Then enter assets & shock assumptions.</p>

        <!-- Income & Assets -->
        <div class="mt-5 grid md:grid-cols-3 gap-4">
          <div class="field">
            <label for="income">Monthly net income (₹)</label>
            <input id="income" type="number" inputmode="decimal" placeholder="e.g., 150000" min="0" step="any">
          </div>
          <div class="field">
            <label for="bank">Bank / Sweep (₹)</label>
            <input id="bank" type="number" inputmode="decimal" placeholder="e.g., 300000" min="0" step="any">
          </div>
          <div class="field">
            <label for="liquid">Liquid fund (₹)</label>
            <input id="liquid" type="number" inputmode="decimal" placeholder="e.g., 400000" min="0" step="any">
          </div>
        </div>
        <div class="mt-4 grid md:grid-cols-3 gap-4">
          <div class="field">
            <label for="fd">Short FD / Ultra-short (₹)</label>
            <input id="fd" type="number" inputmode="decimal" placeholder="e.g., 500000" min="0" step="any">
          </div>
          <div class="field">
            <label for="liqCut">Liquidity haircut — Liquid (%)</label>
            <input id="liqCut" type="number" inputmode="decimal" placeholder="0" step="any">
            <div class="small muted mt-1">Optional safety haircut to be conservative.</div>
          </div>
          <div class="field">
            <label for="fdCut">Liquidity haircut — FD (%)</label>
            <input id="fdCut" type="number" inputmode="decimal" placeholder="1" step="any">
          </div>
        </div>

        <!-- Shock -->
        <div class="mt-6 grid md:grid-cols-4 gap-4">
          <div class="field">
            <label for="incDrop">Income drop (%)</label>
            <input id="incDrop" type="number" inputmode="decimal" placeholder="100" step="any">
            <div class="small muted mt-1">100 = job loss</div>
          </div>
          <div class="field">
            <label for="expSurge">Expense surge (%)</label>
            <input id="expSurge" type="number" inputmode="decimal" placeholder="0" step="any">
          </div>
          <div class="field">
            <label for="oneShock">One-time shock (₹)</label>
            <input id="oneShock" type="number" inputmode="decimal" placeholder="0" step="any">
            <div class="small muted mt-1">Applied in month 1.</div>
          </div>
          <div class="field">
            <label for="horizon">Sim horizon (months)</label>
            <input id="horizon" type="number" inputmode="numeric" placeholder="12" min="1" step="1">
          </div>
        </div>

        <!-- Buckets Table -->
        <div class="mt-6">
          <div class="flex items-center justify-between mb-2">
            <h3 class="font-semibold">Expense buckets (monthly)</h3>
            <div class="flex items-center gap-2">
              <button id="addRow" class="btn btn-ghost">Add Row</button>
              <button id="resetRows" class="btn btn-ghost">Reset</button>
              <button id="csvExp" class="btn btn-ghost">Export CSV</button>
            </div>
          </div>
          <div class="overflow-x-auto">
            <table class="t">
              <thead>
                <tr>
                  <th class="text-left">Name</th>
                  <th class="text-right">Amount (₹)</th>
                  <th class="text-left">Type</th>
                  <th class="text-right">Buffer (mo)</th>
                  <th class="text-right">Actions</th>
                </tr>
              </thead>
              <tbody id="expTable"></tbody>
              <tfoot>
                <tr>
                  <th class="text-left">Totals</th>
                  <th class="text-right mono" id="totAmt">—</th>
                  <th class="text-left"><span class="small muted">Ess: <span id="totEss">—</span> • Disc: <span id="totDisc">—</span></span></th>
                  <th class="text-right mono" id="totBuf">—</th>
                  <th></th>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>

        <div class="mt-6 flex items-center gap-3">
          <button id="calc" class="btn btn-primary">Simulate</button>
          <button id="reset" class="btn btn-ghost">Reset All</button>
          <div id="msg" class="muted small"></div>
        </div>
      </section>

      <!-- RIGHT: Results -->
      <section class="card p-6 md:p-8 lift">
        <h2 class="text-xl font-bold tracking-tight">Results</h2>
        <p class="muted mt-1">We compute baseline spend, target buffers, effective assets after haircuts, and simulate month-by-month burn with a simple glidepath: Bank → Liquid → FD.</p>

        <div class="mt-6 grid-cards">
          <div class="p-4 rounded-lg border">
            <div class="muted text-sm">Baseline monthly spend</div>
            <div id="baseSpend" class="text-2xl font-bold mono">—</div>
            <div class="muted text-sm mt-1">Essential: <span id="essSpend" class="mono">—</span> • Discretionary: <span id="discSpend" class="mono">—</span></div>
          </div>
          <div class="p-4 rounded-lg border">
            <div class="muted text-sm">Target buffer corpus</div>
            <div id="targetBuf" class="text-2xl font-bold mono">—</div>
            <div class="muted text-sm mt-1">= Σ(amount × buffer months)</div>
          </div>
          <div class="p-4 rounded-lg border">
            <div class="muted text-sm">Effective liquid assets</div>
            <div id="effAssets" class="text-2xl font-bold mono">—</div>
            <div class="muted text-sm mt-1">After liquidity haircuts</div>
          </div>
          <div class="p-4 rounded-lg border">
            <div class="muted text-sm">Projected runway</div>
            <div id="runway" class="text-2xl font-bold mono">—</div>
            <div class="muted text-sm mt-1">With shock: <span id="shockLabel" class="mono">—</span></div>
          </div>
        </div>

        <!-- Schedule -->
        <div class="mt-6 flex items-center justify-between">
          <h3 class="font-semibold">Glidepath schedule</h3>
          <div class="flex items-center gap-2">
            <button id="csvSched" class="btn btn-ghost">Export CSV</button>
          </div>
        </div>
        <div class="overflow-x-auto mt-2">
          <table class="t">
            <thead>
              <tr>
                <th class="text-left">Month</th>
                <th class="text-right">Start Bank</th>
                <th class="text-right">Start Liquid</th>
                <th class="text-right">Start FD</th>
                <th class="text-right">Income</th>
                <th class="text-right">Spend (shock)</th>
                <th class="text-right">End Bank</th>
                <th class="text-right">End Liquid</th>
                <th class="text-right">End FD</th>
              </tr>
            </thead>
            <tbody id="schedTable"></tbody>
          </table>
        </div>

        <div class="mt-6 p-4 rounded-lg bg-slate-50 border">
          <div class="kicker mb-1">Rule of thumb</div>
          <p class="text-sm text-slate-700">
            Cover <b>1–2 months</b> of essentials in bank/sweep, <b>2–3 months</b> in liquid funds, and the rest in short FDs or ultra-short debt. Trim discretionary spend under income shocks to extend runway.
          </p>
        </div>
      </section>
    </div>

    <!-- Examples -->
    <section class="mt-8 grid md:grid-cols-2 gap-6">
      <div class="card p-5">
        <div class="kicker mb-1">Examples</div>
        <ul class="text-sm text-slate-700 list-disc pl-5">
          <li><button class="ex btn btn-ghost mt-2" data-example="ex1">Balanced plan: ₹1.5L income, ₹60k essentials, ₹25k disc</button></li>
          <li><button class="ex btn btn-ghost mt-2" data-example="ex2">Job loss: 100% income drop, surge 10%, horizon 12</button></li>
          <li><button class="ex btn btn-ghost mt-2" data-example="ex3">Mild shock: 30% drop, cut discretionary by 50%</button></li>
        </ul>
      </div>
      <div class="card p-5">
        <div class="kicker mb-1">Tips</div>
        <ul class="text-sm text-slate-700 list-disc pl-5">
          <li>Set higher buffer months for fixed/critical buckets (rent, insurance, EMIs).</li>
          <li>Apply a small haircut to liquid/FDs to be conservative.</li>
          <li>Use “one-time shock” for known near-term expenses (appliances, relocation, etc.).</li>
        </ul>
      </div>
    </section>
  </main>

  <!-- Footer (Anthropic-inspired, white) -->
  <footer class="footer text-sm mt-8">
    <div class="footer divider"></div>
    <div class="container py-10">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
        <a href="/" class="flex items-center gap-3">
          <span class="grid place-items-center h-9 w-9 rounded-xl bg-[var(--brand)] text-white font-bold shadow-sm">bS</span>
          <div>
            <div class="text-lg font-bold leading-tight">bataSutra</div>
            <div class="text-xs muted -mt-0.5">Not just news — the <span class="chip">bata</span> behind the news</div>
          </div>
        </a>
        <div class="muted max-w-xl">
          We turn India’s business headlines into context and tools you can actually use.
        </div>
      </div>

      <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-8 mt-10">
        <div>
          <div class="heading mb-3">Product</div>
          <ul class="space-y-2">
            <li><a href="/#indices">Markets</a></li>
            <li><a href="/#heatmap">Heatmap</a></li>
            <li><a href="/#commodities">Commodities</a></li>
            <li><a href="/#articles">Articles</a></li>
          </ul>
        </div>
        <div>
          <div class="heading mb-3">Tools</div>
          <ul class="space-y-2">
            <li><a href="/tools">Browse Tools</a></li>
            <li><a href="/tools/cagr">CAGR &amp; Quick IRR</a></li>
            <li><a href="/tools/sip-planner">SIP Goal &amp; Corpus</a></li>
            <li><a href="/tools/ppf-ladder">PPF &amp; Emergency Ladder</a></li>
            <li><a href="/tools/expense-buckets" aria-current="page">Expense Buckets &amp; Runway</a></li>
          </ul>
        </div>
        <div>
          <div class="heading mb-3">Company</div>
          <ul class="space-y-2">
            <li><a href="/dashboard/whats-inside.html">What’s inside</a></li>
            <li><a href="/careers">Careers</a></li>
            <li><a href="/#subscribe">Newsletter</a></li>
            <li><a href="mailto:hello@batasutra.com">Contact</a></li>
          </ul>
        </div>
        <div>
          <div class="heading mb-3">Resources</div>
          <ul class="space-y-2">
            <li><a href="/tools#changelog">Changelog</a></li>
            <li><a href="/articles">All articles</a></li>
            <li><a href="/privacy">Privacy</a></li>
            <li><a href="/terms">Terms</a></li>
          </ul>
        </div>
        <div>
          <div class="heading mb-3">Follow</div>
          <ul class="space-y-2">
            <li><a href="https://x.com/" target="_blank" rel="noopener">X (Twitter)</a></li>
            <li><a href="https://www.linkedin.com/" target="_blank" rel="noopener">LinkedIn</a></li>
            <li><a href="https://github.com/" target="_blank" rel="noopener">GitHub</a></li>
          </ul>
        </div>
      </div>

      <div class="footer divider mt-10"></div>
      <div class="py-6 flex flex-col md:flex-row items-start md:items-center justify-between gap-3">
        <div class="muted">&copy; <span id="year"></span> bataSutra. All rights reserved.</div>
        <div class="flex items-center gap-4 muted">
          <a href="/privacy">Privacy</a>
          <span aria-hidden="true">•</span>
          <a href="/terms">Terms</a>
          <span aria-hidden="true">•</span>
          <button type="button" class="chip" onclick="window.scrollTo({top:0,behavior:'smooth'})">Back to top ↑</button>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Utilities
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));
    const fmtINR = (n, d=0)=> Number.isFinite(n)? n.toLocaleString('en-IN',{maximumFractionDigits:d}) : '—';
    const toNum = v => { const n = Number(v); return Number.isFinite(n)? n : 0; };

    // Footer year
    $("#year").textContent = new Date().getFullYear();

    // Expense table model
    let ROWS = [];

    const DEFAULT_ROWS = [
      {name:'Rent', amt:30000, type:'essential', buf:2},
      {name:'Utilities', amt:6000, type:'essential', buf:1},
      {name:'Gr
